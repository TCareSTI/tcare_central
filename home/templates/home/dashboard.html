{% extends "global/base.html" %}

{% block content %}
    

    <div class="container mt-5">
        <div class="row">
            <!-- Estatísticas em Tempo Real -->
            <div class="col-md-6">
                <div class="card mb-4 shadow-sm">
                    <div class="card-body">
                        <h1 class="card-title">Estatísticas em Tempo Real</h1>
                        <h2 class="card-subtitle mb-4 text-muted">Número Total de Pessoas no Hospital: {{ total_pessoas }}</h2>
                        <!-- Div para renderizar o gráfico -->
                        <div id="graph" class="text-center">{{ graph_html | safe }}</div>
                    </div>
                </div>
            </div>
            
            <!-- Últimas Leituras -->
            <div class="col-md-6">
                <div class="card mb-4 shadow-sm">
                    <div class="card-body">
                        <h1 class="card-title">Últimas Leituras</h1>
                        <ul class="list-group">
                            {% for leitura in ultimas_leituras %}
                                <li class="list-group-item">
                                    <span class="fw-bold">{{ leitura.monitorado }}</span> - {{ leitura.local }} - {{ leitura.data_leitura }}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4 shadow-sm">
                    <div class="card-body">
                        <h1 class="card-title">Pacientes</h1>
                        <h2 class="card-subtitle mb-4 text-muted">Número de Pacientes: {{ total_pacientes }}</h2>
                        <ul class="list-group">
                            {% for leitura in ultimos_pacientes %}
                                <li class="list-group-item">
                                    <span class="fw-bold">{{ leitura.monitorado }}</span> - Tag: {{ leitura.tag_ble }}, {{ leitura.local }}, {{leitura.data_leitura}}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card mb-4 shadow-sm">
                    <div class="card-body">
                        <h1 class="card-title">Acompanhantes</h1>
                        <h2 class="card-subtitle mb-4 text-muted">Número de Acompanhantes: {{ total_acompanhantes }}</h2>
                        <ul class="list-group">
                            {% for leitura in ultimos_acompanhantes %}
                                <li class="list-group-item">
                                    <span class="fw-bold">{{ leitura.monitorado }}</span> - Tag: {{ leitura.tag_ble }}, {{ leitura.local }}, {{ leitura.data_leitura }}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4 shadow-sm">
                    <div class="card-body">
                        <h1 class="card-title">Médicos</h1>
                        <h2 class="card-subtitle mb-4 text-muted">Número de Médicos: {{ total_medicos }}</h2>
                        <ul class="list-group">
                            {% for leitura in ultimos_medicos %}
                                <li class="list-group-item">
                                    <span class="fw-bold">{{ leitura.monitorado }}</span> - Tag: {{ leitura.tag_ble }}, {{ leitura.local }}, {{ leitura.data_leitura }}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card mb-4 shadow-sm">
                    <div class="card-body">
                        <h1 class="card-title">Enfermeiros</h1>
                        <h2 class="card-subtitle mb-4 text-muted">Número de Enfermeiros: {{ total_enfermeiros }}</h2>
                        <ul class="list-group">
                            {% for enfermeiro in enfermeiros %}
                                <li class="list-group-item">
                                    <span class="fw-bold">{{ enfermeiro }}</span> - Tag: {{ enfermeiro.tag_ble }}, Local: {{ enfermeiro.local_atual }}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


    
    
{% endblock content %}